(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["async-content-browser"],{'./node_modules/css-loader/index.js?{"sourceMap":false,"localIdentName":"[name]-[local]-[hash:base64:5]","importLoaders":2,"minimize":{"safe":true}}!./node_modules/postcss-loader/src/index.js?{"config":{"path":"/home/bamboo/bamboo-agent-home/xml-data/build-dir/SQSPV6-CI-BFE/site-server/build-scripts/gulp/config"}}!./node_modules/less-loader/dist/cjs.js!./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ContentBrowserEditor.less':function(e,r,n){r=e.exports=n("./node_modules/css-loader/lib/css-base.js")(false);r.push([e.i,".ContentBrowserEditor-loadingDialogBody-ON20L{align-items:center;justify-content:center}",""]);r.locals={loadingDialogBody:"ContentBrowserEditor-loadingDialogBody-ON20L"}},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ContentBrowserEditor.js":function(e,r,n){"use strict";var t=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var B=s(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/extends.js"));var I=s(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/slicedToArray.js"));var S=s(n("./src/main/webapp/universal/node_modules/lodash/get.js"));var R=t(n("./src/main/webapp/universal/node_modules/react/index.js"));var a=s(n("./src/main/webapp/universal/node_modules/prop-types/index.js"));var x=n("./src/main/webapp/universal/node_modules/@sqs/core-components/build/lib/index.js");var M=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/dangerzone.js");var o=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/index.js");var D=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/constants/Keys.js");var P=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/context/EditorContext.js");var O=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js"));var N=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/registry/index.js"));var T=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/hooks/useRegistry.js");var i=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/editor.js");var l=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/collections.js");var c=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/entities.js");var u=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/selectors.js");var q=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/ModalWrapper.js"));var U=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/utils/collectionUtils.js");var p=n("./src/main/webapp/universal/node_modules/@sqs/experimental-components/build/lib/index.js");var d=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ContentBrowserEditor.less"));var m=p.Modal.NavDialog;var L=function e(){return R.default.createElement(m,null,R.default.createElement(m.Body,{centered:true,className:d.default.loadingDialogBody},R.default.createElement(x.CircularProgressIndicator,null)))};var v=function e(r){var s=r.entity,n=r.categories,t=r.tags,a=r.initialRoute,o=r.isDirty,i=r.isOpen,l=r.isNewEntity,c=r.isLoading,u=r.onCloseSettingsModal,p=r.onSave,d=r.onClone,m=r.onDeleteEntity,v=r.onFormChange;var f=(0,R.useState)(false),b=(0,I.default)(f,2),w=b[0],C=b[1];var j=(0,S.default)(s,"collection.id")||(0,S.default)(s,"contentItem.id");var g=(0,T.useRegistry)(D.SETTINGS,j,s);(0,R.useEffect)(function(){if(i&&!N.default.accepts(D.SETTINGS,s)){var r=window.SQUARESPACE_SENTRY;r?r.withScope(function(e){e.setTag("project","content_browser");e.setExtra("context",(0,U.getCollectionDataForReporting)(s));e.setLevel("info");r.captureMessage("Collection Editor Opened With No Settings Component")}):console.warn("Collection Editor Opened With No Settings Component")}},[i]);var E=function e(){try{var r=s.contentItem;if(r){var n=O.default.getCollection(r.parentCollectionId);M.CMSV7Events.saveCollectionItem({itemId:r.id,collectionType:n.typeName,collectionId:n.id})}}catch(e){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track save collection failed")}return p.apply(void 0,arguments)};var h=function e(r){r&&(o||l)?C(true):u()};var y=function e(r){d(r).then(function(){return h(true)})};var _=function e(){try{if(s&&s.contentItem){var r=s.contentItem;if(o){var n=O.default.getCollection(r.parentCollectionId);M.CMSV7Events.cancelEditCollectionItem({itemId:r.id,collectionType:n.typeName,collectionId:n.id})}}}catch(e){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track cancel collection item failed")}C(false);u()};var A=function e(){var r=s.contentItem,n=s.collection;var t=r.id||n.id;m(t).then(_)};if(!s||!s.collection&&!s.contentItem)return null;return R.default.createElement(P.EditorProvider,{isOpen:i,initialRoute:a,onFormChange:v,isDirty:o,isNewEntity:l},R.default.createElement(q.default,{isOpen:i||c,onRequestClose:function e(){return h(true)}},i?R.default.createElement(R.Suspense,{fallback:R.default.createElement(L,null)},R.default.createElement(g,(0,B.default)({},s,{categories:n,tags:t,onRequestClose:h,onSave:E,onClone:y}))):R.default.createElement(L,null)),R.default.createElement(x.ConfirmModal,{cancelStyle:"default",confirmStyle:"default",confirmLabel:(0,M.t)("Discard"),isOpen:w,onConfirm:l?A:_,onDismiss:function e(){return C(false)},onRequestClose:function e(){return C(false)},message:(0,M.t)("You have made changes. Are you sure you want to discard them?")}))};v.propTypes={entity:a.default.object,categories:a.default.object,tags:a.default.object,initialRoute:a.default.string,isDirty:a.default.bool,isOpen:a.default.bool,isNewEntity:a.default.bool,isLoading:a.default.bool,onCloseSettingsModal:a.default.func,onSave:a.default.func,onClone:a.default.func,onDeleteEntity:a.default.func,onFormChange:a.default.func};var f=(0,o.connect)(function(e){return{isOpen:(0,u.getShouldShowSettingsModal)(e),isDirty:(0,u.getIsDirty)(e),entity:(0,u.getCurrentEditingEntity)(e),categories:(0,u.getEditingCategories)(e),tags:(0,u.getEditingTags)(e),initialRoute:(0,u.getDefaultEditorTab)(e),isLoading:(0,u.getIsModalLoading)(e),isNewEntity:(0,u.getIsNewEntity)(e)}},{onCloseSettingsModal:i.closeSettingsEditorModal,onFormChange:i.formChange,onSave:c.updateEntity,onDeleteEntity:c.deleteEntity,onClone:l.cloneCollection})(v);r.default=f;e.exports=r.default},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ContentBrowserEditor.less":function(e,r,n){var t=n('./node_modules/css-loader/index.js?{"sourceMap":false,"localIdentName":"[name]-[local]-[hash:base64:5]","importLoaders":2,"minimize":{"safe":true}}!./node_modules/postcss-loader/src/index.js?{"config":{"path":"/home/bamboo/bamboo-agent-home/xml-data/build-dir/SQSPV6-CI-BFE/site-server/build-scripts/gulp/config"}}!./node_modules/less-loader/dist/cjs.js!./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ContentBrowserEditor.less');"string"===typeof t&&(t=[[e.i,t,""]]);var s;var a;var o={hmr:true};o.transform=s;o.insertInto=void 0;var i=n("./node_modules/style-loader/lib/addStyles.js")(t,o);t.locals&&(e.exports=t.locals);false},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ContentBrowserManager.js":function(e,r,n){"use strict";var t=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var j=s(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/extends.js"));var g=s(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/slicedToArray.js"));var E=s(n("./src/main/webapp/universal/node_modules/lodash/get.js"));var h=t(n("./src/main/webapp/universal/node_modules/react/index.js"));var a=s(n("./src/main/webapp/universal/node_modules/prop-types/index.js"));var y=n("./src/main/webapp/universal/node_modules/@sqs/core-components/build/lib/index.js");var o=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/items.js");var i=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/context.js");var l=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/error.js");var _=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js"));var A=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ContentBrowserEditor.js"));var c=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/index.js");var u=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/dangerzone.js");var p=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/confirm.js");var d=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/selectors.js");var B=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/utils/urlUtils.js");var m=function e(r){var n=r.location,t=void 0===n?{}:n,a=r.collections,o=r.items,s=r.currentCollectionId,i=r.currentItemId,l=r.onUpdateCurrentLocation,c=r.onLoadItemsForCollection,u=r.error,p=r.onCloseErrorModal,d=r.onCloseConfirmModal,m=r.onConfirmAction,v=r.confirm;var f=(0,h.useState)({}),b=(0,g.default)(f,2),w=b[0],C=b[1];(0,h.useEffect)(function(){var e=(0,E.default)(t,"params.id");var r=(0,E.default)(t,"state.frameUrl");C({collectionId:e,frameUrl:r})},[t.params,t.state]);(0,h.useEffect)(function(){var e=w.collectionId;var r=a[e];if(!_.default.canHandleCollection(r))return;if(e!==s){l({collectionId:e});c(e)}},[w.collectionId]);(0,h.useEffect)(function(){var e=w.collectionId,r=w.frameUrl;if(!e)return;var n=a[e];if(!n)return;var t=(0,B.getItemUrlId)(r,n.urlId);if(!t)return;var s=Object.values(o).find(function(e){return e.urlId===t});s&&s.id!==i&&l({collectionId:e,itemId:s.id})},[w.frameUrl,o]);return h.default.createElement(h.Fragment,null,h.default.createElement(A.default,null),h.default.createElement(y.AlertModal,(0,j.default)({},u,{onDismiss:p,onRequestClose:p})),h.default.createElement(y.ConfirmModal,(0,j.default)({},v,{confirmHtmlAttributes:{"data-test":"content-browser-confirm-button"},cancelHtmlAttribute:{"data-test":"content-browser-cancel-button"},onDismiss:d,onRequestClose:d,onConfirm:m,cancelStyle:"default",confirmStyle:"default"})))};m.propTypes={location:a.default.object,collections:a.default.object,items:a.default.object,currentCollectionId:a.default.string,currentItemId:a.default.string,onUpdateCurrentLocation:a.default.func,onLoadItemsForCollection:a.default.func,error:a.default.object,onCloseErrorModal:a.default.func,onCloseConfirmModal:a.default.func,onConfirmAction:a.default.func,confirm:a.default.object};var v=(0,u.withRouter)((0,c.connect)(function(e){return{collections:(0,d.getAllCollections)(e),currentCollectionId:(0,d.getCurrentCollectionId)(e),currentItemId:(0,d.getCurrentItemId)(e),error:(0,d.getErrorModalState)(e),confirm:(0,d.getConfirmModalState)(e),items:(0,d.getItems)(e)}},{onUpdateCurrentLocation:i.updateCurrentLocation,onLoadItemsForCollection:o.loadItemsForCollection,onCloseErrorModal:l.closeErrorModal,onCloseConfirmModal:p.closeConfirmModal,onConfirmAction:p.confirmAction})(m));r.default=v;e.exports=r.default},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ErrorBoundary.js":function(e,r,n){"use strict";var t=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var o=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/createClass.js"));var i=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/inherits.js"));var p=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/defineProperty.js"));var a=t(n("./src/main/webapp/universal/node_modules/react/index.js"));var d=function(e){(0,u.default)(a,e);function a(){var e;var r;(0,o.default)(this,a);for(var n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];r=(0,i.default)(this,(e=(0,l.default)(a)).call.apply(e,[this].concat(t)));(0,p.default)((0,c.default)(r),"state",{hasError:false});return r}(0,s.default)(a,[{key:"componentDidCatch",value:function e(r,n){var t=window.SQUARESPACE_SENTRY;t?t.withScope(function(e){e.setTag("project","content_browser");t.captureException(r)}):console.error(r);this.setState({hasError:true})}},{key:"render",value:function e(){if(this.state.hasError)return null;return this.props.children}}]);return a}(a.default.Component);var m=d;r.default=m;e.exports=r.default},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/index.js":function(e,r,n){"use strict";var t=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var s=t(n("./src/main/webapp/universal/node_modules/react/index.js"));var a=t(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ContentBrowserManager.js"));var o=t(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/components/ErrorBoundary.js"));var i=function e(){return s.default.createElement(o.default,null,s.default.createElement(a.default,null))};r.default=i;e.exports=r.default},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/ModalWrapper.js":function(e,r,n){"use strict";var t=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var m=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/extends.js"));var v=t(n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var f=t(n("./src/main/webapp/universal/node_modules/react/index.js"));var b=n("./src/main/webapp/universal/node_modules/@sqs/experimental-components/build/lib/index.js");var w=230;var C={closeOnEsc:true,closeOnOverlayClicked:true};var j={position:"center"};var g=b.Modal.Transition,E=b.Modal.Backdrop,h=b.Modal.Position;var s=function e(r){var n=r.onRequestClose,t=r.isOpen,s=r.positionProps,a=void 0===s?j:s,o=r.transitionDuration,i=void 0===o?w:o,l=r.modalProps,c=void 0===l?C:l,u=r.onTransitionEnd,p=void 0===u?function(){return null}:u,d=(0,v.default)(r,["onRequestClose","isOpen","positionProps","transitionDuration","modalProps","onTransitionEnd"]);return f.default.createElement(g,{duration:i,onTransitionEnd:p},t&&f.default.createElement(b.Modal,(0,m.default)({onRequestClose:n},c),f.default.createElement(E,null),f.default.createElement(h,a,d.children)))};r.default=s;e.exports=r.default},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/context/EditorContext.js":function(e,r,n){"use strict";var t=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(r,"__esModule",{value:true});r.EditorProvider=r.default=void 0;var l=t(n("./src/main/webapp/universal/node_modules/react/index.js"));var s=t(n("./src/main/webapp/universal/node_modules/memoize-one/dist/memoize-one.esm.js"));var c=l.default.createContext("content-browser-editor");var a=c;r.default=a;var u=(0,s.default)(function(e,r,n,t,s){return{isOpen:e,initialRoute:r,onFormChange:n,isDirty:t,isNewEntity:s}});var o=function e(r){var n=r.children,t=r.isOpen,s=r.initialRoute,a=r.onFormChange,o=r.isDirty,i=r.isNewEntity;return l.default.createElement(c.Provider,{value:u(t,s,a,o,i)},n)};r.EditorProvider=o},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/hooks/useRegistry.js":function(e,r,n){"use strict";var t=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=n("./src/main/webapp/universal/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(r,"__esModule",{value:true});r.useRegistryCallback=r.useRegistry=void 0;var o=s(n("./src/main/webapp/universal/node_modules/react/index.js"));var i=t(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/registry/index.js"));var a=function e(r,n){for(var t=arguments.length,s=new Array(t>2?t-2:0),a=2;a<t;a++)s[a-2]=arguments[a];return(0,o.useMemo)(function(){return i.default.get.apply(i.default,[r].concat(s))},[n])};r.useRegistry=a;var l=function e(n){return function(r){return(0,o.useMemo)(function(){var e=i.default.get(n,r);return o.default.createElement(e,r)},[r])}};r.useRegistryCallback=l},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/utils/urlUtils.js":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.getItemUrlId=void 0;var t=function e(r,n){return r.replace("/".concat(n,"/"),"")};r.getItemUrlId=t}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/async-content-browser-ec08c5a6c36596570cbe2-min.en-US.js.map